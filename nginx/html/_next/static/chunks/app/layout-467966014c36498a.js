(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{2874:()=>{},3866:(e,t,a)=>{"use strict";a.d(t,{default:()=>m});var r=a(5155);let o=async()=>{try{let e=await fetch("/api/last-login",{method:"GET",credentials:"include"});e.ok||console.error("API error:",e.status)}catch(e){console.error("Fetch failed:",e)}console.log("test")};var n=a(2110),s=a(3729),l=a(8534),i=a(2663),c=a(5695),u=a(2115),d=a(9079);let h=[{tag:"フレンド",title:"フレンドを探します",url:"/"},{tag:"サーバー",title:"サーバーを探します(未実装)",url:"/server"},{tag:"プロフィール",title:"プロフィールを編集します",url:"/profile"}],p={position:"absolute",right:"7vw",top:"5vh"},f={textShadow:"0 4px 12px rgba(0,0,0,0.2)",color:"black",paddingX:2,paddingY:1,transition:"background-color 0.3s ease","&:hover":{backgroundColor:"#f0f0f0"}};function m(){let{userCard:e}=(0,u.useContext)(d.c),t=(0,c.useRouter)(),[a,m]=(0,u.useState)(!1),g="https://cdn.discordapp.com/avatars/".concat(e.id,"/").concat(e.avatar),y=async e=>{t.push(e)};return(0,r.jsxs)(n.A,{container:!0,sx:p,children:[h.map(e=>(0,r.jsx)(n.A,{children:(0,r.jsx)(s.A,{title:e.title,arrow:!0,children:(0,r.jsx)(l.A,{sx:f,onClick:()=>y(e.url),children:e.tag})})},e.tag)),(0,r.jsx)(n.A,{children:e.id&&(0,r.jsx)(s.A,{title:a?"表示順を更新済":"表示順を上げる",arrow:!0,children:(0,r.jsx)(l.A,{sx:f,onClick:()=>{o(),m(!0)},children:"表示順アップ"})})}),(0,r.jsx)(n.A,{sx:{transform:"translate(10px, 4px)"},children:(0,r.jsx)(s.A,{title:e.id?"hello! ".concat(e.globalName," "):"ログインします",arrow:!0,children:(0,r.jsx)(i.A,{src:g,sx:{width:30,height:30},onClick:()=>t.push(h[2].url)})})})]})}},7666:(e,t,a)=>{"use strict";a.d(t,{default:()=>l});var r=a(5155),o=a(4453),n=a(5041);a(2115);let s=(0,n.A)({key:"mui",prepend:!0});function l(e){let{children:t}=e;return(0,r.jsx)(o.C,{value:s,children:t})}},8190:(e,t,a)=>{Promise.resolve().then(a.bind(a,4581)),Promise.resolve().then(a.bind(a,1116)),Promise.resolve().then(a.t.bind(a,2874,23)),Promise.resolve().then(a.bind(a,9079)),Promise.resolve().then(a.bind(a,7666)),Promise.resolve().then(a.bind(a,9076)),Promise.resolve().then(a.bind(a,3866))},9076:(e,t,a)=>{"use strict";a.d(t,{r:()=>i,default:()=>c});var r=a(5155),o=a(2115);async function n(e,t){let a=(function(e,t){let a=[];for(let r=e;r<=t;r++)a.push(r);return a})(e.playtime[0],e.playtime[1]).map(e=>(function(e){let t=Math.floor(e/2);return"".concat(String(t).padStart(2,"0"),":").concat(e%2==0?"00":"30")})(e)),r=await fetch("".concat("","/api/friend/search?page=").concat(t-1,"&size=15"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({games:e.game,ranks:e.rank,playstyle:e.playstyle,playtime:a})}),o=await r.json();return await o}let s={game:[],rank:[],playstyle:[],playtime:[0,48]},l=[],i=(0,o.createContext)({Search:s,setSearch:()=>{},users:l,setUsers:()=>{},totalPages:1,setTotalPages:()=>{},error:null,setError:()=>{},page:1,setPage:()=>{}});function c(e){let{children:t}=e,[a,c]=(0,o.useState)(l),[u,d]=(0,o.useState)(s),[h,p]=(0,o.useState)(1),[f,m]=(0,o.useState)(null),[g,y]=(0,o.useState)(1);return(0,o.useEffect)(()=>{(async()=>{let e=await n(u,g);c(e.content),p(e.totalPages),m(e.error||null)})()},[g]),(0,o.useEffect)(()=>{(async()=>{let e=await n(u,1);c(e.content),p(e.totalPages),m(e.error||null),y(1)})()},[u]),(0,r.jsx)(i.Provider,{value:{Search:u,setSearch:d,users:a,setUsers:c,totalPages:h,setTotalPages:p,error:f,setError:m,page:g,setPage:y},children:t})}},9079:(e,t,a)=>{"use strict";a.d(t,{c:()=>s,default:()=>l,s:()=>n});var r=a(5155),o=a(2115);let n={id:null,name:"no_id",avatar:null,globalName:"no_name",userInfo:{games:[],playtime1:["",""],playtime2:["",""],playstyle:[],introduction:"こんにちは、はじめまして",lastLoginAt:null},userOption:{showGender:!1,showAge:!1,showGenderToSameSex:!1,showProfile:!1},cardOption:{color:"black",motion:null}},s=(0,o.createContext)({userCard:n,setUserCard:()=>{},loading:!0});function l(e){let{children:t}=e,[a,l]=(0,o.useState)(n),[i,c]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat("","/api/check"),{method:"GET",credentials:"include"});if(204===e.status||401===e.status)return void l(n);if(!e.ok)throw Error("Network response was not ok");let t=await e.json(),a={id:t.id,name:t.name,avatar:t.avatar,globalName:t.globalName,userInfo:{games:t.userInfo.games,playtime1:t.userInfo.playtime1,playtime2:t.userInfo.playtime2,playstyle:t.userInfo.playstyle,introduction:t.userInfo.introduction,lastLoginAt:t.userInfo.lastLoginAt},userOption:{showGender:t.userOption.showGender,showAge:t.userOption.showAge,showGenderToSameSex:t.userOption.showGenderToSameSex,showProfile:t.userOption.showProfile},cardOption:{color:t.cardOption.color||"black",motion:t.cardOption.motion||null}};l(a)}catch(e){console.error("認証エラー:",e)}finally{c(!1)}})()},[]),(0,r.jsx)(s.Provider,{value:{userCard:a,setUserCard:l,loading:i},children:t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[605,94,175,948,656,441,684,358],()=>t(8190)),_N_E=e.O()}]);