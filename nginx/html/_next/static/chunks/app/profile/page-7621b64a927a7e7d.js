(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{794:(e,t,r)=>{"use strict";r.d(t,{k:()=>n});let n=["Apex Legends","Battlefield 2042","Call of Duty: MWII","Call of Duty: Wz","Counter-Strike 2","Destiny 2","Escape from Tarkov","Halo Infinite","Overwatch 2","Paladins","PUBG: Battlegrounds","Rainbow Six Siege","VALORANT"]},3181:(e,t,r)=>{"use strict";r.d(t,{g:()=>l});let n=["初心者","中級者","上級者"],l={"Apex Legends":["ランクなし","ブロンズ","シルバー","ゴールド","プラチナ","ダイヤモンド","マスター","プレデター"],"Battlefield 2042":n,"Call of Duty: MWII":["ランクなし","ブロンズ","シルバー","ゴールド","プラチナ","ダイヤモンド","マスター","グランドマスター"],"Call of Duty: Wz":["ランクなし","ブロンズ","シルバー","ゴールド","プラチナ","ダイヤモンド","マスター","グランドマスター"],"Counter-Strike 2":["ランクなし","シルバー","ゴールドノヴァ","マスターガーディアン","レジェンダリーイーグル","スプレームマスター","グローバルエリート"],"Destiny 2":n,"Escape from Tarkov":n,"Halo Infinite":["ランクなし","ブロンズ","シルバー","ゴールド","プラチナ","ダイヤモンド","オニックス"],"Overwatch 2":["ランクなし","ブロンズ","シルバー","ゴールド","プラチナ","ダイヤモンド","マスター","グランドマスター","トップ500"],Paladins:["ランクなし","ブロンズ","シルバー","ゴールド","プラチナ","ダイヤモンド","マスター","グランドマスター"],"PUBG: Battlegrounds":["ランクなし","ブロンズ","シルバー","ゴールド","プラチナ","ダイヤモンド","エース","コンカラー"],"Rainbow Six Siege":["ランクなし","コッパー","ブロンズ","シルバー","ゴールド","プラチナ","ダイヤモンド","チャンピオン"],VALORANT:["ランクなし","アイアン","ブロンズ","シルバー","ゴールド","プラチナ","ダイヤモンド","イモータル","レイディアント"]}},4612:(e,t,r)=>{Promise.resolve().then(r.bind(r,9089))},5374:(e,t,r)=>{"use strict";r.d(t,{W:()=>n});let n=["ランク","カジュアル・アンランク","初心者","ゆったり","ガチプレイ","聞き専","コーチング可","コーチング募集"]},7923:(e,t,r)=>{"use strict";r.d(t,{q:()=>h});var n=r(5155);let l=["00:00","00:30","01:00","01:30","02:00","02:30","03:00","03:30","04:00","04:30","05:00","05:30","06:00","06:30","07:00","07:30","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30","24:00"];var a=r(4581),o=r(2663),s=r(1116),i=r(8534),d=r(1803),u=r(3423),c=r(9874);let f={subFont:{fontSize:14,color:"gray"}};var p=r(2115);let x=e=>"".concat(e[0]," ~ ").concat(e[e.length-1]),h=(0,p.forwardRef)((e,t)=>{var r;let{user:h,lastLoginAt:g}=e,m="https://cdn.discordapp.com/avatars/".concat(h.id,"/").concat(h.avatar),y=(0,p.useRef)(null),[j,b]=(0,p.useState)(!1),[w,k]=(0,p.useState)(420),[S,C]=(0,p.useState)(!1);function I(){S?C(!1):C(!0)}return(0,p.useEffect)(()=>{y.current&&(S?k(y.current.scrollHeight):k(420))},[S]),(0,n.jsx)(a.default,{sx:{position:"relative",overflow:"hidden",width:330,height:w,bgcolor:"#2f3136",color:"white",borderRadius:2,p:2,boxShadow:3,alignSelf:"flex-start",display:"flex",flexDirection:"column",transition:"height 0.3s ease"},onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),children:(0,n.jsxs)(a.default,{ref:y,children:[(0,n.jsx)(()=>(0,n.jsxs)(a.default,{sx:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:2},children:[(0,n.jsx)(o.A,{src:m,sx:{width:80,height:80}}),(0,n.jsxs)(a.default,{children:[(0,n.jsxs)(a.default,{sx:{display:"flex"},children:[(0,n.jsx)(s.default,{sx:f.subFont,children:"name"}),(0,n.jsx)(s.default,{sx:{...f.subFont,ml:16},children:g})]}),(0,n.jsx)(s.default,{variant:"h6",children:h.globalName}),(0,n.jsx)(s.default,{fontSize:14,color:"gray",children:h.name})]})]}),{}),(0,n.jsx)(()=>0===h.userInfo.games.length?null:(0,n.jsxs)(a.default,{sx:{marginTop:1},children:[(0,n.jsx)(s.default,{fontSize:14,color:"gray",children:"game | rank"}),h.userInfo.games.map((e,t)=>(0,n.jsxs)(s.default,{children:[e.title," | ",e.rank]},t))]}),{}),(0,n.jsx)(()=>{let e={border:"1px solid gray",borderRadius:1,p:.5};return(0,n.jsxs)(a.default,{sx:{display:"flex",gap:1,marginTop:1},children:[l.includes(h.userInfo.playtime1[0])&&(0,n.jsxs)(a.default,{sx:{flex:1},children:[(0,n.jsx)(s.default,{fontSize:14,color:"gray",children:"平日プレイ時間帯"}),(0,n.jsx)(s.default,{sx:e,children:x(h.userInfo.playtime1)})]}),l.includes(h.userInfo.playtime2[0])&&(0,n.jsxs)(a.default,{sx:{flex:1},children:[(0,n.jsx)(s.default,{fontSize:14,color:"gray",children:"休日プレイ時間帯"}),(0,n.jsx)(s.default,{sx:e,children:x(h.userInfo.playtime2)})]})]})},{}),(0,n.jsx)(()=>0===h.userInfo.playstyle.length?null:(0,n.jsxs)(a.default,{sx:{marginTop:1},children:[(0,n.jsx)(s.default,{fontSize:14,color:"gray",children:"playstyle"}),(0,n.jsx)(s.default,{sx:{border:"1px solid gray",borderRadius:1,p:.5},children:h.userInfo.playstyle.join(", ")})]}),{}),(0,n.jsx)(()=>h.userInfo.introduction?(0,n.jsxs)(a.default,{sx:{mt:1,mb:"auto"},children:[(0,n.jsx)(s.default,{fontSize:14,color:"gray",children:"introduction"}),(0,n.jsx)(s.default,{variant:"body2",sx:{border:"1px solid gray",borderRadius:1,p:.5,mt:.5,overflowWrap:"break-word"},children:h.userInfo.introduction}),(0,n.jsx)(a.default,{sx:{height:110,backgroundColor:"#2f3136"}})]}):null,{}),(0,n.jsx)(e=>{let{ID:t}=e;return(0,n.jsxs)(a.default,{sx:{position:"absolute",bottom:0,width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,n.jsx)(a.default,{onClick:I,sx:{width:"100%",height:60,background:"linear-gradient(to bottom, rgba(47,49,54,0.3) 0%, rgba(47,49,54,1) 100%)",display:"flex",justifyContent:"center",alignItems:"end"},children:S?(0,n.jsx)(u.A,{sx:{opacity:1,transform:"translateX(-50%)",fontSize:"2rem",color:j?"#1565C0":"white"}}):(0,n.jsx)(c.A,{sx:{opacity:1,transform:"translateX(-50%)",fontSize:"2rem",color:j?"#1565C0":"white"}})}),(0,n.jsx)(a.default,{sx:{width:"100%",height:10,backgroundColor:"#2f3136"}}),(0,n.jsxs)(a.default,{sx:{width:"100%",backgroundColor:"#2f3136"},children:[(0,n.jsx)(i.A,{variant:"contained",color:"primary",fullWidth:!0,onClick:()=>navigator.clipboard.writeText(t),sx:{width:"90%",height:40},children:"IDをコピー"}),(0,n.jsx)(a.default,{sx:{height:10,backgroundColor:"#2f3136"}})]})]})},{ID:null!=(r=h.id)?r:""}),(0,n.jsx)(d.A,{spacing:2})]})})})},9079:(e,t,r)=>{"use strict";r.d(t,{c:()=>o,default:()=>s,s:()=>a});var n=r(5155),l=r(2115);let a={id:null,name:"no_id",avatar:null,globalName:"no_name",userInfo:{games:[],playtime1:["",""],playtime2:["",""],playstyle:[],introduction:"こんにちは、はじめまして",lastLoginAt:null},userOption:{showGender:!1,showAge:!1,showGenderToSameSex:!1,showProfile:!1},cardOption:{color:"black",motion:null}},o=(0,l.createContext)({userCard:a,setUserCard:()=>{},loading:!0});function s(e){let{children:t}=e,[r,s]=(0,l.useState)(a),[i,d]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("".concat("","/api/check"),{method:"GET",credentials:"include"});if(204===e.status||401===e.status)return void s(a);if(!e.ok)throw Error("Network response was not ok");let t=await e.json(),r={id:t.id,name:t.name,avatar:t.avatar,globalName:t.globalName,userInfo:{games:t.userInfo.games,playtime1:t.userInfo.playtime1,playtime2:t.userInfo.playtime2,playstyle:t.userInfo.playstyle,introduction:t.userInfo.introduction,lastLoginAt:t.userInfo.lastLoginAt},userOption:{showGender:t.userOption.showGender,showAge:t.userOption.showAge,showGenderToSameSex:t.userOption.showGenderToSameSex,showProfile:t.userOption.showProfile},cardOption:{color:t.cardOption.color||"black",motion:t.cardOption.motion||null}};s(r)}catch(e){console.error("認証エラー:",e)}finally{d(!1)}})()},[]),(0,n.jsx)(o.Provider,{value:{userCard:r,setUserCard:s,loading:i},children:t})}},9089:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>es});var n=r(5155),l=r(4581),a=r(4426),o=r(1116),s=r(1090),i=r(7370),d=r(2115),u=r(2836),c=r(4693),f=r(9079),p=r(794),x=r(3181);let h=e=>x.g[e],g=e=>{let{defGames:t,gameOptions:r,inputKey:a,newGameTitle:s,setUserCard:i,setNewGameTitle:d,setInputKey:f}=e,p=(e,t)=>{i(r=>{let n=[...r.userInfo.games];return null==t?n.splice(e,1):n[e]={title:null!=t?t:"",rank:""},{...r,userInfo:{...r.userInfo,games:n}}})},x=(e,t)=>{i(r=>{let n=[...r.userInfo.games];return n[e]={...r.userInfo.games[e],rank:null!=t?t:""},{...r,userInfo:{...r.userInfo,games:n}}})};return(0,n.jsxs)(l.default,{children:[(0,n.jsx)(o.default,{fontSize:14,color:"gray",children:"ゲームとランクを追加"}),(0,n.jsx)(l.default,{children:t.map((e,t)=>(0,n.jsxs)(l.default,{sx:{display:"flex",gap:3,marginTop:1},children:[(0,n.jsx)(c.A,{options:r,onChange:(e,r)=>p(t,r),value:e.title||"",sx:{width:245},renderInput:e=>(0,n.jsx)(u.A,{...e,label:"ゲームタイトル"})}),(0,n.jsx)(c.A,{options:h(e.title),onChange:(e,r)=>{x(t,r)},value:e.rank||"",sx:{width:190,marginTop:1},renderInput:e=>(0,n.jsx)(u.A,{...e,label:"ランクを選択",variant:"standard"})})]},t))}),t.length<5&&(0,n.jsx)(l.default,{sx:{display:"flex",gap:3,marginTop:1},children:(0,n.jsx)(c.A,{options:r,onChange:(e,r)=>{r&&(p(t.length,r),d(null),f(e=>e+1))},value:s,onInputChange:(e,t)=>d(t),sx:{width:245},renderInput:e=>(0,n.jsx)(u.A,{...e,label:"ゲームタイトル"})},a)})]})};function m(){let{userCard:e,setUserCard:t}=(0,d.useContext)(f.c),r=e.userInfo.games.map(e=>e.title),[a,o]=(0,d.useState)(r),[s,i]=(0,d.useState)(null),[u,c]=(0,d.useState)(0);return(0,d.useEffect)(()=>{let t=e.userInfo.games.map(e=>e.title);o(p.k.filter(e=>!t.includes(e)))},[e.userInfo.games]),(0,n.jsx)(l.default,{children:(0,n.jsx)(g,{defGames:e.userInfo.games,gameOptions:a,setNewGameTitle:i,newGameTitle:s,inputKey:u,setInputKey:c,setUserCard:t})})}var y=r(9144),j=r(832),b=r.n(j);function w(){let{userCard:e,setUserCard:t}=(0,d.useContext)(f.c);function r(e,r){let n=r?r.format("HH:mm"):"";t(t=>{let r=[...t.userInfo.playtime1],l=[...t.userInfo.playtime2];switch(e){case"weekdayStart":r[0]=n;break;case"weekdayEnd":r[1]=n;break;case"holidayStart":l[0]=n;break;case"holidayEnd":l[1]=n}return{...t,userInfo:{...t.userInfo,playtime1:r,playtime2:l}}})}return(0,n.jsxs)(l.default,{sx:{display:"flex",flexDirection:"column",marginTop:4},children:[(0,n.jsx)(o.default,{fontSize:14,marginBottom:1,color:"gray",children:"平日"}),(0,n.jsxs)(l.default,{sx:{display:"flex",gap:2},children:[(0,n.jsx)(y.A,{label:"開始時刻",minutesStep:30,value:e.userInfo.playtime1[0]?b()(e.userInfo.playtime1[0],"HH:mm"):null,onChange:e=>r("weekdayStart",e)}),(0,n.jsx)(y.A,{label:"終了時刻",minutesStep:30,value:e.userInfo.playtime1[e.userInfo.playtime1.length-1]?b()(e.userInfo.playtime1[e.userInfo.playtime1.length-1],"HH:mm"):null,onChange:e=>r("weekdayEnd",e)})]}),(0,n.jsx)(o.default,{fontSize:14,marginTop:4,marginBottom:1,color:"gray",children:"休日"}),(0,n.jsxs)(l.default,{sx:{display:"flex",gap:2},children:[(0,n.jsx)(y.A,{label:"開始時刻",minutesStep:30,value:e.userInfo.playtime2[0]?b()(e.userInfo.playtime2[0],"HH:mm"):null,onChange:e=>r("holidayStart",e)}),(0,n.jsx)(y.A,{label:"終了時刻",minutesStep:30,value:e.userInfo.playtime2[e.userInfo.playtime2.length-1]?b()(e.userInfo.playtime2[e.userInfo.playtime2.length-1],"HH:mm"):null,onChange:e=>r("holidayEnd",e)})]})]})}function k(){let{userCard:e,setUserCard:t}=(0,d.useContext)(f.c);return(0,n.jsxs)(l.default,{sx:{marginTop:2},children:[(0,n.jsx)(o.default,{fontSize:14,color:"gray",children:"自己紹介"}),(0,n.jsx)(u.A,{defaultValue:e.userInfo.introduction,onBlur:function(e){let r=e.target.value;t(e=>({...e,userInfo:{...e.userInfo,introduction:r}}))},multiline:!0,minRows:6,sx:{width:"31rem","& .MuiInputBase-root":{height:"17rem",alignItems:"start",overflow:"auto"}}})]})}var S=r(579),C=r(4915),I=r(4572);function v(){let{userCard:e,setUserCard:t}=(0,d.useContext)(f.c),r=e.userOption,a=(e,r)=>{t(t=>{let n={...t.userOption};switch(r){case 0:n.showGender=e;break;case 1:n.showAge=e;break;case 2:n.showGenderToSameSex=e;break;case 3:n.showProfile=e}return{...t,userOption:n}})};return(0,n.jsx)(l.default,{sx:{display:"flex",paddingLeft:1,marginTop:4},children:(0,n.jsxs)(S.A,{children:[(0,n.jsx)(o.default,{fontSize:14,color:"gray",children:"公開オプション"}),(0,n.jsx)(C.A,{control:(0,n.jsx)(I.A,{checked:r.showProfile,onChange:(e,t)=>{a(t,3)}}),label:"プロフィールを公開する"})]})})}var A=r(5933),z=r(5374),T=r(2480),O=r(5206),E=r(9242),G=r(5955),H=r(5714);function P(){let e=(0,A._)(["\n  padding: 0 0 4px;\n  line-height: 1.5;\n  display: block;\n"]);return P=function(){return e},e}let R=(0,G.Ay)("div")(e=>{let{theme:t}=e;return{color:"rgba(0,0,0,0.85)",fontSize:"14px",...t.applyStyles("dark",{color:"rgba(255,255,255,0.65)"})}}),B=(0,G.Ay)("label")(P()),D=(0,G.Ay)("div")(e=>{let{theme:t}=e;return{width:"490px",border:"1px solid #d9d9d9",backgroundColor:"#fff",borderRadius:"4px",padding:"1px",display:"flex",flexWrap:"wrap",...t.applyStyles("dark",{borderColor:"#434343",backgroundColor:"#141414"}),"&:hover":{borderColor:"#40a9ff",...t.applyStyles("dark",{borderColor:"#177ddc"})},"&.focused":{borderColor:"#40a9ff",boxShadow:"0 0 0 2px rgb(24 144 255 / 0.2)",...t.applyStyles("dark",{borderColor:"#177ddc"})},"& input":{backgroundColor:"#fff",color:"rgba(0,0,0,.85)",height:"30px",boxSizing:"border-box",padding:"4px 6px",width:"0",minWidth:"30px",flexGrow:1,border:0,margin:0,outline:0,...t.applyStyles("dark",{color:"rgba(255,255,255,0.65)",backgroundColor:"#141414"})}}}),N=(0,G.Ay)(function(e){let{label:t,onDelete:r,...l}=e;return(0,n.jsxs)("div",{...l,children:[(0,n.jsx)("span",{children:t}),(0,n.jsx)(E.A,{onClick:r})]})})(e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",height:"24px",margin:"2px",lineHeight:"22px",backgroundColor:"#fafafa",border:"1px solid #e8e8e8",borderRadius:"2px",boxSizing:"content-box",padding:"0 4px 0 10px",outline:0,overflow:"hidden",...t.applyStyles("dark",{backgroundColor:"rgba(255,255,255,0.08)",borderColor:"#303030"}),"&:focus":{borderColor:"#40a9ff",backgroundColor:"#e6f7ff",...t.applyStyles("dark",{backgroundColor:"#003b57",borderColor:"#177ddc"})},"& span":{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},"& svg":{fontSize:"12px",cursor:"pointer",padding:"4px"}}}),W=(0,G.Ay)("ul")(e=>{let{theme:t}=e;return{width:"490px",margin:"2px 0 0",padding:0,position:"absolute",listStyle:"none",backgroundColor:"#fff",overflow:"auto",maxHeight:"250px",borderRadius:"4px",boxShadow:"0 2px 8px rgb(0 0 0 / 0.15)",zIndex:1,...t.applyStyles("dark",{backgroundColor:"#141414"}),"& li":{padding:"5px 12px",display:"flex","& span":{flexGrow:1},"& svg":{color:"transparent"}},"& li[aria-selected='true']":{backgroundColor:"#fafafa",fontWeight:600,...t.applyStyles("dark",{backgroundColor:"#2b2b2b"}),"& svg":{color:"#1890ff"}},["& li.".concat(H.A.focused)]:{backgroundColor:"#e6f7ff",cursor:"pointer",...t.applyStyles("dark",{backgroundColor:"#003b57"}),"& svg":{color:"currentColor"}}}});function L(e){let{MyplayStyleList:t,handleChange:r}=e,{getRootProps:l,getInputLabelProps:a,getInputProps:o,getTagProps:s,getListboxProps:i,getOptionProps:d,groupedOptions:u,value:c,focused:f,setAnchorEl:p}=(0,T.A)({id:"customized-hook-demo",multiple:!0,options:z.W,value:t,onChange:(e,t)=>{r(t)}});return(0,n.jsxs)(R,{children:[(0,n.jsxs)("div",{...l(),children:[(0,n.jsx)(B,{...a()}),(0,n.jsxs)(D,{ref:p,className:f?"focused":"",children:[c.map((e,t)=>{let{key:r,...l}=s({index:t});return(0,n.jsx)(N,{...l,label:e},r)}),(0,n.jsx)("input",{...o()})]})]}),u.length>0?(0,n.jsx)(W,{...i(),children:u.map((e,t)=>{let{key:r,...l}=d({option:e,index:t});return(0,n.jsxs)("li",{...l,children:[(0,n.jsx)("span",{children:e}),(0,n.jsx)(O.A,{fontSize:"small"})]},r)})}):null]})}function _(){let{userCard:e,setUserCard:t}=(0,d.useContext)(f.c),r=e.userInfo.playstyle;return(0,n.jsxs)(R,{children:[(0,n.jsx)(o.default,{fontSize:14,color:"gray",children:"プレイスタイル"}),(0,n.jsx)(L,{MyplayStyleList:r,handleChange:e=>{t(t=>({...t,userInfo:{...t.userInfo,playstyle:e}}))}})]})}function F(){let{userCard:e}=(0,d.useContext)(f.c);return e.userOption,(0,n.jsx)(l.default,{sx:{marginTop:2},children:e.userOption.showProfile&&(0,n.jsx)(o.default,{children:"※プロフィールは公開されます"})})}var M=r(8534),U=r(5726),V=r(5594);let q=V.z.object({userInfo:V.z.object({games:V.z.array(V.z.object({title:V.z.enum(p.k),rank:V.z.string()}).refine(e=>{var t;return null==(t=x.g[e.title])?void 0:t.includes(e.rank)},{message:"ゲームのランクは必ず選択してください",path:["rank"]})),playtime1:V.z.array(V.z.string()),playtime2:V.z.array(V.z.string()),playstyle:V.z.array(V.z.enum(z.W)),introduction:V.z.string().max(500,"自己紹介は500文字以内で入力してください").nullable()}),option:V.z.object({showGender:V.z.boolean(),showAge:V.z.boolean(),showGenderToSameSex:V.z.boolean(),showProfile:V.z.boolean()}),cardOption:V.z.object({color:V.z.enum(["black","sakura"]),motion:V.z.null()})});function K(e){try{let t=e[0],r=e[e.length-1],n=b()("2020-01-01T".concat(t)),l=b()("2020-01-01T".concat(r));if("24:00"===r&&(l=b()("2020-01-02T00:00")),l.isBefore(n))throw Error("終了時刻より遅い開始時刻に設定することはできません");let a=[];for(;n.isBefore(l)||n.isSame(l);)a.push(n.format("HH:mm")),n=n.add(30,"minute");return a}catch(e){throw e}}async function X(e){try{let t=q.parse(e),r=t.userInfo,n=t.option,l=t.cardOption;if(console.log(e),(!r.playtime1||0===r.playtime1.length||""==r.playtime1[0]||""==r.playtime1[1])&&(!r.playtime2||0===r.playtime2.length||""==r.playtime2[0]||""==r.playtime2[1]))throw Error("平日か休日いずれかのプレイ時間を入力してください");if(r.playtime1[0]&&r.playtime1[1]&&r.playtime1[0]==r.playtime1[1]||r.playtime2[0]&&r.playtime2[1]&&r.playtime2[0]==r.playtime2[1])throw Error("開始時刻と終了時刻を同じにすることはできません");let a=await fetch("".concat("","/api/profile/update"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userInfo:{games:r.games,playtime1:K(r.playtime1),playtime2:K(r.playtime2),playstyle:r.playstyle,introduction:r.introduction},userOption:n,cardOption:l}),credentials:"include"});if(!a.ok){let e=await a.json();return{success:!1,message:e.message||"送信に失敗しました"}}if(a.ok&&204===a.status)return{success:!0,message:"プロフィールが更新されました"};return{success:!0}}catch(e){if(e instanceof V.G)return{success:!1,message:e.errors.map(e=>{let t=e.path.join(".")||"入力";return"".concat(t,": ").concat(e.message)}).join("\n")||"入力内容に誤りがあります。"};if(e instanceof Error)return{success:!1,message:e.message||"予期せぬエラーが発生しました。"};return{success:!1,message:"不明なエラーが発生しました。"}}}function J(){let{userCard:e}=(0,d.useContext)(f.c),t={userInfo:e.userInfo,option:e.userOption,cardOption:e.cardOption},[r,l]=(0,d.useState)(null);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M.A,{onClick:async()=>{let e=await X(t);e.success?e.success&&l(e.message||"プロフィールを更新しました"):l(e.message||"不明なエラー")},variant:"contained",children:"プロフィールを更新"}),r&&(0,n.jsx)(U.A,{open:!0,message:r,autoHideDuration:6e3,onClose:()=>l(null)})]})}var $=r(6114),Q=r(1977),Y=r(9927),Z=r(6871),ee=r(4492),et=r(5695);function er(){let[e,t]=(0,d.useState)(!1),{setUserCard:r}=(0,d.useContext)(f.c),l=(0,et.useRouter)(),a=()=>{t(!1)},o=async()=>{try{let e=await fetch("".concat("","/api/delete"),{method:"DELETE",credentials:"include"});if(!e.ok){let t=await e.text();throw Error(t||"削除に失敗しました")}t(!1),l.push("/deletetimeout")}catch(e){alert("削除失敗: ".concat(e.message))}};return(0,n.jsxs)(d.Fragment,{children:[(0,n.jsx)(M.A,{onClick:()=>{t(!0)},variant:"contained",sx:{bgcolor:"red"},children:"アカウントを削除"}),(0,n.jsxs)($.A,{open:e,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,n.jsx)(ee.A,{id:"alert-dialog-title",children:"FPScアカウントを削除しますか？"}),(0,n.jsx)(Y.A,{children:(0,n.jsxs)(Z.A,{id:"alert-dialog-description",children:["FPScアカウントを削除しますか？この操作は元に戻せません。",(0,n.jsx)("br",{}),"一時的にプロフィールを非公開にしたい場合は「プロフィールを公開する」のチェックを外してください。"]})}),(0,n.jsxs)(Q.A,{children:[(0,n.jsx)(M.A,{onClick:o,children:"はい"}),(0,n.jsx)(M.A,{onClick:a,autoFocus:!0,children:"いいえ"})]})]})]})}function en(){return(0,n.jsxs)(l.default,{sx:{marginTop:4},children:[(0,n.jsx)(J,{}),(0,n.jsx)(er,{})]})}var el=r(7923);let ea={display:"flex",justifyContent:"center",gap:2},eo={textAlign:"center",fontSize:"2rem",fontWeight:"bold",textShadow:"1px 1px 2px rgba(0,0,0,0.3)",marginBottom:4};function es(){let{loading:e,userCard:t}=(0,d.useContext)(f.c);return((0,d.useEffect)(()=>{e||t.id||(window.location.href="".concat("","/api/oauth2/authorization/discord"))},[e,t]),e)?(0,n.jsx)(l.default,{sx:{display:"flex",justifyContent:"center",marginTop:10},children:(0,n.jsx)(a.A,{})}):(0,n.jsx)(s.$,{dateAdapter:i.R,children:(0,n.jsxs)(l.default,{children:[(0,n.jsx)(o.default,{sx:eo,children:"プロフィール編集"}),(0,n.jsxs)(l.default,{sx:ea,children:[(0,n.jsxs)(l.default,{children:[(0,n.jsx)(m,{}),(0,n.jsx)(w,{})]}),(0,n.jsxs)(l.default,{children:[(0,n.jsx)(_,{}),(0,n.jsx)(k,{}),(0,n.jsx)(l.default,{sx:{marginTop:4}}),(0,n.jsx)(v,{})]}),(0,n.jsxs)(l.default,{sx:{},children:[(0,n.jsx)(el.q,{user:t}),(0,n.jsx)(F,{})]})]}),(0,n.jsx)(l.default,{sx:{textAlign:"center"},children:(0,n.jsx)(en,{})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[94,175,948,232,624,441,684,358],()=>t(4612)),_N_E=e.O()}]);